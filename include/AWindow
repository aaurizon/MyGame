// Base window abstraction that owns a platform window and an event pump.
#pragma once

#include <AEvent>
#include <memory>
#include <string>
#include <vector>

class IWindowImpl;

class AWindow {
public:
    AWindow(const std::string& title, int width, int height);
    virtual ~AWindow();

    bool isOpen() const;
    virtual void close();
    virtual void setTitle(const std::string& title);

    std::vector<std::shared_ptr<AEvent>> pollEvents();

    void setCursorGrabbed(bool grabbed);
    bool isCursorGrabbed() const;

    int getWidth() const;
    int getHeight() const;
    void* getNativeHandle() const;
    void setRect(int x, int y, int width, int height);

protected:
    AWindow(const std::string& title, int width, int height, void* parentHandle, int x, int y, bool child);
    std::unique_ptr<IWindowImpl> impl_;
};
