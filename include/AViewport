// Viewport couples the render window area to the world and active camera matrices.
#pragma once

#include <glm/glm.hpp>
#include <ATextOverlay>
#include <vector>

class AWorld;

class AViewport {
public:
    AViewport(int width, int height, int x = 0, int y = 0);

    void setWorld(AWorld& world);
    AWorld* getWorld() const;

    void setRect(int x, int y, int width, int height);
    void setSize(int width, int height);
    void setPosition(int x, int y);
    int getX() const;
    int getY() const;
    int getWidth() const;
    int getHeight() const;
    float getAspectRatio() const;

    void setViewMatrix(const glm::mat4& view);
    void setProjectionMatrix(const glm::mat4& projection);

    const glm::mat4& getViewMatrix() const;
    const glm::mat4& getProjectionMatrix() const;
    void setOverlayTexts(const std::vector<ATextOverlay>& overlays);
    const std::vector<ATextOverlay>& getOverlayTexts() const;

private:
    AWorld* world_{nullptr};
    int x_{0};
    int y_{0};
    int width_{1};
    int height_{1};
    glm::mat4 view_{1.0f};
    glm::mat4 projection_{1.0f};
    std::vector<ATextOverlay> overlays_;
};
